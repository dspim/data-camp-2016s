{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Data Visualization with ggplot2\"\nsubtitle: \"Introduction\"\nauthor: \"Chung Fu,Yang\"\ndate: \"2015年10月28日\"\nlogo: zz.png\noutput: \n  ioslides_presentation: \n    fig_height: 6\n    fig_width: 14\n    widescreen: yes\n    background: white\n---\n```{r ,echo=FALSE,warning=FALSE,message=F}\noptions('scipen'=100,'digits'=2)\nknitr::opts_chunk$set(comment=\"\",prompt=T,strip.white=F,warning=FALSE,message=F,echo=F)\nlibrary(xtable)\nlibrary(dplyr)\nlibrary(dygraphs)\nlibrary(ggplot2)\nlibrary(ggmap)\nlibrary(data.table)\nlibrary(devtools)\nlibrary(plotly)\nlibrary(rCharts)\nlibrary(tidyr)\nlibrary(DT)\nlibrary(RColorBrewer)\ndata = read.table('/Users/apple/Downloads/20151011_2005to2012鄉鎮市區診所數.txt',header=F)\ncolnames(data) = c(\"year\",\"city\",\"district\",\"hosp_type_id\",\"count\")\ntai = read.csv(\"taibx.csv\",header = T,fileEncoding = 'big5')\n```\n# Speaker \n## About me {class=\"columns-8\"}\n- ![Chung Fu,Yang](fu.png)\n- Currently study at NCCU for M.S. degree of statistic  \n    - data analysis  \n    - machine learning\n    - research some package application with R \n    - learn some visualization skills\n    - Familar with  R、SQL-Server、Python \n\n## Outline \n- ggplot2 introduction\n- 基本起手式\n- 各種圖形指令參數統整\n    - bar\n    - boxplot\n    - line\n    - point\n    - histogram\n    - density\n- bonus ? \n\n## ggplot2 in R  {.smaller}\n- [最受歡迎的視覺視套件](https://plot.ly/357/%7ELofu/)\n- 由Hadley Wickham於2005年發表 (Chief Scientist in RStudio)\n- [設計理念](https://github.com/cosname/ggplot2-translation/blob/master/preface.md)\n\n```{r,echo=TRUE}\nlibrary(ggplot2)\n# list all geom\nls(pattern = '^geom_', env = as.environment('package:ggplot2'))\n```\n\n## 基本起手式 \n>- ggplot(data=..., aes(x=..., y=...)) + geom_xxx(...) \n    - data=畫圖所需資料\n    - aes=x、y所想擺放的變數\n    - geom_XXX 則代表你想畫哪一種圖\n    - ex:geom_bar、geom_points......\n    \n<div class=\"red2\">\n>- ggplot僅能使用data.frame儲存資料(不可丟其他屬性的物件)\n</div>\n\n<div class=\"centered\">\n![](z.png)\n</div>\n\n# 各種圖形指令參數統整-bar\n## geom_bar \n- [R調色盤](http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf)\n```{r fig.width=10.5,fig.height=4,echo=TRUE}\ndata %>% group_by(city) %>% summarise(count=length(year)) -> datap\nggplot(datap,aes(x=city,y=count))+geom_bar(stat=\"identity\")\n```\n\n## geom_bar {.smaller}\n- fill\n- theme_grey(base_family=\"STHeiti\"\n```{r fig.width=10.5,fig.height=1.5,echo=TRUE}\nggplot(datap,aes(x=city,y=count,fill=city))+geom_bar(stat=\"identity\")+\n  theme_grey(base_family=\"STHeiti\") \n```\n\n- scale_fill_brewer(palette = \"Paired\")\n```{r fig.width=10.5,fig.height=1,echo=TRUE}\nggplot(datap,aes(x=city,y=count,fill=city))+geom_bar(stat=\"identity\")+\n  theme_grey(base_family=\"STHeiti\")+scale_fill_brewer(palette = \"Paired\")\n```\n\n## geom_bar {.smaller}\n- labs(title =\"pongpong胖胖\", x = \"pongpong\", y = \"胖胖\")\n```{r  fig.width=10,fig.height=4,echo=TRUE}\nggplot(datap,aes(x=city,y=count,fill=city))+geom_bar(stat=\"identity\")+\n  theme_grey(base_family=\"STHeiti\")+labs(title =\"pongpong胖胖\", x = \"pongpong\", y = \"胖胖\")\n```\n\n## geom_bar {.smaller}\n- annotate(\"text\", x =2, y =190, label =\"love\", colour = \"black\",size=5.5)\n- annotate('rect', xmin=0.5, xmax=1.5, ymin=-Inf, ymax=Inf, fill='blue', alpha=.25)\n- geom_hline(aes(yintercept=410),colour = \"blue\",linetype = \"dashed\", size = 1)\n```{r fig.width=10,fig.height=3,echo=TRUE}\nggplot(datap,aes(x=city,y=count,fill=city))+geom_bar(stat=\"identity\")+\n  theme_grey(base_family=\"STHeiti\")+labs(title =\"pongpong胖胖\", x = \"pongpong\", y = \"胖胖\")+\n  annotate(\"text\", x =2, y =190, label =\"幹\",family=\"STHeiti\", colour = \"black\",size=5.5)+\n  annotate('rect', xmin=0.5, xmax=1.5, ymin=-Inf, ymax=Inf, fill='blue', alpha=.25)+\n  geom_hline(aes(yintercept=410),colour = \"blue\",linetype = \"dashed\", size = 1)\n```\n\n## geom_bar {.smaller}\n```{r fig.width=10,fig.height=3,echo=TRUE}\ntai %>% filter(交易月!=\"0\") %>% filter(交易年!=\"103\")%>% group_by(交易年,交易月) %>% \n  summarise(total=length(鄉鎮市區)) -> ta\nta$交易年 = as.factor(ta$交易年)\nta$交易月 = as.factor(ta$交易月)\nggplot(ta,aes(x=交易年,y=total,fill=交易月))+geom_bar(stat=\"identity\",position=\"dodge\")+\n  theme_grey(base_family=\"STHeiti\")+labs(title =\"pongpong胖胖\", x = \"pongpong\", y = \"胖胖\")+\n  annotate(\"text\", x =2, y =190, label =\"幹\",family=\"STHeiti\", colour = \"black\",size=5.5)+\n  scale_fill_brewer(palette =\"Set3\")\n```\n\n## geom_bar {.smaller}\n- facet_wrap(~交易月,ncol=3)\n```{r fig.width=10,fig.height=3,echo=TRUE}\ntai %>% filter(交易月!=\"0\") %>% filter(交易年!=\"103\") %>% group_by(交易年,交易月,建物型態) %>% \n  summarise(total=length(鄉鎮市區)) -> tt\ntt$交易年 = as.factor(tt$交易年)\ntt$交易月 = as.factor(tt$交易月)\nggplot(tt,aes(x=建物型態,y=total,fill=交易月))+geom_bar(stat=\"identity\",position=\"dodge\")+\n  theme_grey(base_family=\"STHeiti\")+labs(title =\"pongpong胖胖\", x = \"pongpong\", y = \"胖胖\")+\n  annotate(\"text\", x =2, y =190, label =\"幹\",family=\"STHeiti\", colour = \"black\",size=5.5)+\n  scale_fill_brewer(palette =\"Set3\")+facet_wrap(~交易年,ncol=3)\n```\n\n# 各種圖形指令參數統整-boxplot\n## geom_boxplot {.smaller}\n```{r fig.width=8,fig.height=2,echo=TRUE}\nggplot(iris,aes(x=Species,y=Sepal.Length))+geom_boxplot()\n```\n\n- geom_boxplot(outlier.colour = \"red\", outlier.size = 3)\n```{r fig.width=8,fig.height=2,echo=TRUE}\nggplot(iris,aes(x=Species,y=Sepal.Length))+ geom_boxplot(outlier.colour=\"red\", outlier.size = 3)\n```\n\n## geom_boxplot {.smaller}\n- aes(fill=Species)\n```{r fig.width=8,fig.height=2,echo=TRUE}\nggplot(iris,aes(x=Species,y=Sepal.Length))+\n  geom_boxplot(aes(fill=Species), colour = \"black\",outlier.colour=\"red\", outlier.size = 3)\n```\n- fill =c(\"blue\",\"red\",\"yellow\")\n```{r fig.width=8,fig.height=2,echo=TRUE}\nggplot(iris,aes(x=Species,y=Sepal.Length))+\n  geom_boxplot(fill =c(\"blue\",\"red\",\"yellow\"), colour = \"#3366FF\",outlier.colour=\"red\", outlier.size = 3)\n```\n\n## geom_boxplot {.smaller}\n- fill =\"white\"\n```{r fig.width=8,fig.height=2,echo=TRUE}\nggplot(iris,aes(x=Species,y=Sepal.Length))+\n  geom_boxplot(fill =\"white\", colour = \"#3366FF\",outlier.colour=\"red\", outlier.size = 3)\n```\n\n>- boxplot先這樣就好 ！！ㄏㄏㄏ\n\n# 各種圖形指令參數統整-line\n## 色盤控制\n\n![](eg.png)\n\n## geom_line {.smaller}\n- 轉成因子後要加上group=1\n```{r fig.width=8,fig.height=4,echo=TRUE}\ntai %>% group_by(交易月) %>% filter(交易月!=\"0\") %>% \n  summarise(total = length(鄉鎮市區)) -> taii\ntaii$交易月 = as.factor(taii$交易月)\nggplot(taii,aes(x=交易月, y=total,group=1)) + geom_line()\n```\n\n## geom_line {.smaller}\n- group=交易年,color=交易年,linetype=交易年\n- theme_grey(base_family=\"STHeiti\")\n```{r fig.width=8,fig.height=3,echo=TRUE}\ntai %>% group_by(交易年,交易月) %>% filter(交易月!=\"0\") %>% filter(交易年!=\"103\")%>%\n  summarise(total = length(鄉鎮市區)) -> taiii\ntaiii$交易年 = as.factor(taiii$交易年);taiii$交易月 = as.factor(taiii$交易月)\nggplot(taiii,aes(x=交易月,y=total,group=交易年,color=交易年,linetype=交易年))+geom_line()+\n  theme_grey(base_family=\"STHeiti\")\n```\n\n## geom_line {.smaller}\n- scale_color_discrete(name='pongpong', labels=c('00', 'z雲'))\n- how to change color of line ???\n- geom_point(size=2,colour=\"black\") \n```{r fig.width=8,fig.height=3,echo=TRUE}\ncbbPalette <- c( \"#D55E00\", \"#CC79A7\")\nggplot(taiii,aes(x=交易月,y=total,colour=交易年, group=交易年))+geom_line()+\n  theme_grey(base_family=\"STHeiti\")+scale_color_discrete(name='pongpong', labels=c('00', 'z雲'))+scale_colour_manual(values=cbbPalette)+geom_point(size=2,colour=\"black\")\n```\n\n# 各種圖形指令參數統整-point\n## geom_point {.smaller}\n```{r fig.width=8,fig.height=3,echo=TRUE}\nggplot(tai,aes(x=屋齡,y=單價.元.平方公尺.))+geom_point()\n```\n\n## geom_point {.smaller}\n- geom_point(position='jitter', alpha=0.3,size=7,color=\"#CC79A7\")\n- stat_smooth(method=lm, level=.95,color=\"gray33\")\n```{r fig.width=8,fig.height=3,echo=TRUE}\nggplot(tai,aes(x=屋齡,y=單價.元.平方公尺.))+geom_point(position='jitter', alpha=0.3,size=3,color=\"#CC79A7\")+theme_grey(base_family=\"STHeiti\")+\nstat_smooth(method=lm, level=.95,color=\"gray33\")\n```\n\n## geom_point {.smaller}\n- coord_cartesian(xlim = c(0,55))\n```{r fig.width=8,fig.height=3,echo=TRUE}\nggplot(tai,aes(x=屋齡,y=單價.元.平方公尺.))+geom_point(position='jitter', alpha=0.3,size=3,color=\"#CC79A7\")+theme_grey(base_family=\"STHeiti\")+\nstat_smooth(method=lm, level=.95,color=\"gray33\")+coord_cartesian(xlim = c(0,55))\n```\n\n## geom_point {.smaller}\n- cbPalette <- c( \"#0072B2\", \"#D55E00\", \"#CC79A7\")\n- scale_colour_manual(values=cbPalette)\n```{r fig.width=8,fig.height=2,echo=TRUE}\ntai$屋齡 = as.numeric(tai$屋齡)\ncbPalette <- c(\"#0072B2\", \"#D55E00\", \"#CC79A7\")\nggplot(tai,aes(x=屋齡,y=單價.元.平方公尺.,color=交易年))+geom_point(position='jitter', alpha=0.3,size=3)+\n  theme_grey(base_family=\"STHeiti\")+\n  stat_smooth(method=lm, level=.95)+coord_cartesian(xlim = c(0,55))\n```\n\n\n\n\n",
    "created" : 1465021560255.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1732565565",
    "id" : "1623A0AE",
    "lastKnownWriteTime" : 1466482342,
    "last_content_update" : 1466482342968,
    "path" : "~/Documents/shinyteach/ggplot2introduce/ggplot2introduction.Rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}